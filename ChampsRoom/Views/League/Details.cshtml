@model ChampsRoom.Models.LeagueDetailsViewModel

<div class="row">
    <div class="col-xs-12 col-xs-12">
        <h1>
            @Model.League.Name
            @if (Request.IsAuthenticated)
            {
                <span class="pull-right">
                    <a class="btn btn-large btn-info pull-right" href="@Url.Action("Create", "Result", new { leagueUrl = Model.League.Url })">Register result</a>
                </span>
            }
        </h1>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <table class="table table-striped table-hover table-clickable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Player</th>
                    <th class="text-center">Rating</th>
                    <th class="text-center hidden-xs">Matches</th>
                    <th class="text-center">
                        <span class="hidden-xs">Won</span>
                        <span class="visible-xs">W</span>
                    </th>
                    <th class="text-center">
                        <span class="hidden-xs">Lost</span>
                        <span class="visible-xs">L</span>
                    </th>
                    <th class="text-center">
                        <span class="hidden-xs">Score</span>
                        <span class="visible-xs">S</span>
                    </th>
                </tr>
            </thead>
            @foreach (var item in Model.Rankings)
            {
                <tr>
                    <td>
                        @if (item.RankingChange == 0)
                        {
                            @item.Rank
                        }
                        else if (item.RankingChange != 0)
                        {
                            @item.Rank <small class="text-muted">@item.RankingChange.DisplayChange()</small>
                        }
                        @if (item.Rank == 1)
                        {
                            <img src="~/content/images/rank-first.gif" style="height: 18px; top: -2px; left: 3px; position: relative;" alt="" />
                        }
                        else if (item.Rank == 2)
                        {
                            <img src="~/content/images/rank-second.gif" style="height: 18px; top: -2px; left: 3px; position: relative;" alt="" />
                        }
                        else if (item.Rank == Model.Rankings.Count)
                        {
                            <img src="~/content/images/rank-last.gif" style="height: 16px; top: -1px; left: 3px; position: relative;" alt="" />
                        }
                    </td>
                    <td>@Html.ActionLink(item.User.UserName, "Details", "Result", new { leagueUrl = Model.League.Url, userUrl = item.User.Url }, null)</td>
                    <td class="text-center">
                        @item.Rate <small class="text-muted">@item.RatingChange.DisplayChange()</small>
                    </td>
                    <td class="text-center hidden-xs">@item.Matches</td>
                    <td class="text-center">@item.Won</td>
                    <td class="text-center">@item.Lost</td>
                    <td class="text-center">@item.Score.DisplayChange()</td>
                </tr>
            }
        </table>
    </div>
</div>

<div class="row text-center">
    <h1>Latest matches</h1>
</div>

<div class="row">
    <div class="col-xs-12 col-md-12">

        @foreach (var item in Model.LatestMatches)
        {
            <div class="row text-center">

                <div class="col-xs-5 col-md-5 text-right">
                    <p class="lead"><a href="@Url.Action("Details", "Team", new { teamUrl = item.HomeTeam.Url })">@item.HomeTeam.Name</a></p>
                </div>

                <div class="col-xs-2 col-md-2">
                    <p class="lead"><span class="label label-default">@item.GetHomeSetScore()</span><small class="text-muted">-</small><span class="label label-default">@item.GetAwaySetScore()</span></p>
                </div>

                <div class="col-xs-5 col-md-5 text-left">
                    <p class="lead"><a href="@Url.Action("Details", "Team", new { teamUrl = item.AwayTeam.Url })">@item.AwayTeam.Name</a></p>
                </div>

            </div>
        }

    </div>
</div>
